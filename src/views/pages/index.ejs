<!-- views/pages/index.ejs -->
<!DOCTYPE html>
<html lang="en">

<head>
    <% include ../partials/head %>
</head>

<body class="container" background="/food.jpg">
    <header>
        <% include ../partials/header %>
    </header>
    <main>
        <div class="bgimg-1">
            <div class="caption">
            </div>
        </div>
        <div class="container">
            <div class="box">
            </div>
            <div class="content">
                <h1>Allergy Free Pal</h1>
                <p>Bored of eating at home? Want to go out to eat with friends but unsure of where to go? Never fear, Allergy Free Pal is here! Allergy Free Pal is an allergy friendly restaurant finder that will give you a list of restaurants to choose from based on your allergies. </p>
            </div>
        </div>
        <div align="center">
            <div class="container-1">
                <div class="verticalcenter"></div>
                <form id="regForm" action="/action_page.php">
                    <div class="h1">Restaurant Finder</div>
                    Find allergy-friendly<br>restaurants near you!
                    <div class="tab">
                        <p><input placeholder="Enter your zip code" oninput="this.className = ''" name="fname"></p>
                        <div class="col">
                            <% allergies.forEach(function(allergy) { %>
                            <input name="allergies" type="checkbox" value="<%= allergy.name %>"><%= allergy.name %>
                            <% }); %>
                        </div>
                    </div>
                </form>
                <script>
                showTab(0);

                function showTab(n) {
                    // This function will display the specified tab of the form...
                    var x = document.getElementsByClassName("tab");
                    x[n].style.display = "block";
                    //... and fix the Previous/Next buttons:
                    if (n == 0) {
                        document.getElementById("prevBtn").style.display = "none";
                    } else {
                        document.getElementById("prevBtn").style.display = "inline";
                    }
                    if (n == (x.length - 1)) {
                        document.getElementById("nextBtn").innerHTML = "Submit";
                    } else {
                        document.getElementById("nextBtn").innerHTML = "Next";
                    }
                }

                function validateForm() {
                    // This function deals with validation of the form fields
                    var x, y, i, valid = true;
                    x = document.getElementsByClassName("tab");
                    y = x[currentTab].getElementsByTagName("input");
                    // A loop that checks every input field in the current tab:
                    for (i = 0; i < y.length; i++) {
                        // If a field is empty...
                        if (y[i].value == "") {
                            // add an "invalid" class to the field:
                            y[i].className += " invalid";
                            // and set the current valid status to false
                            valid = false;
                        }
                    }
                    // If the valid status is true, mark the step as finished and valid:
                    if (valid) {
                        document.getElementsByClassName("step")[currentTab].className += " finish";
                    }
                    return valid; // return the valid status
                }
                </script>
            </div>
        </div>
    </main>
    <footer>
        <% include ../partials/footer %>
    </footer>
</body>

</html>